var I=Object.defineProperty;var A=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var M=(e,n,t)=>n in e?I(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,C=(e,n)=>{for(var t in n||(n={}))V.call(n,t)&&M(e,t,n[t]);if(A)for(var t of A(n))U.call(n,t)&&M(e,t,n[t]);return e};import{d as B,r as d,c as m,w as H,o as W,a as K,n as T,V as v,e as k,s as X,P as J,E as G}from"./vendor.884eee3d.js";function ye(){import("data:text/javascript,")}const Q=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}};Q();var Y=B({name:"ElTableExtColumnRender",props:{render:{type:Function,required:!0},row:Object,column:{type:Object},value:{type:[String,Number],default:""},index:Number},render(e){const{row:n,column:t,value:o,index:r}=this;return this.render(e,{row:n,column:t,value:o,index:r})}});const O={currentPage:1,pageSizes:[10,20,40,50,100],pageSize:20,layout:"total, sizes, ->, prev, pager, next, jumper",background:!0,total:0};function Z(e){if(!!Array.isArray(e))return(n,{value:t})=>{const o=e.find(r=>r.value===t);return o?n("span",{class:o.class},[o.text]):""}}function ee(e){const n=v.filter(e);if(n)return(t,o,r)=>n(r)}var te=B({name:"ElTableExt",components:{ColumnRender:Y},props:{columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},query:Function,pager:{type:[Object,Boolean],default:()=>({})},autoLoad:{type:Boolean,default:!0},defaultSort:Object,height:[String,Number],flexible:{type:Boolean,default:!0},emptyText:String,emptyImage:String,emptyImageSize:Number,options:{type:Object,default:()=>({})}},setup(e,{emit:n}){const t=d(null),o=d(null),r=d(!1),a=d(q()),i=d(0),p=d(e.defaultSort||{}),u=m(()=>{var c;const l={};return(c=t.value)==null||c.columns.forEach(({property:_,filteredValue:y})=>{y&&y.length&&(l[_]=y)}),l}),s=d(null),h=d(""),g=m(()=>typeof e.query!="function"),f=m(()=>e.flexible||!!e.height),b=m(()=>(g.value?e.data:s.value)||[]),x=m(()=>{var l;return((l=t.value)==null?void 0:l.selection)||[]}),F=m(()=>e.columns.filter(l=>l.visible!==!1).map(l=>{const c=C({},l);if(c.renderOption)c.render=Z(c.renderOption);else if(typeof c.formatter=="string"){const _=ee(c.formatter);_?c.formatter=_:delete c.formatter}return c}));function S(){var l;(l=t.value)==null||l.doLayout()}function q(){const{pager:l}=e;return typeof l=="boolean"?O:C(C({},O),l)}async function E(){if(!(g.value||!e.query)){r.value=!0;try{const{data:l,total:c}=await e.query({pagin:a.value,filters:u.value,sorts:p.value});s.value=l,h.value="",a.value.total=c}catch(l){throw s.value=[],h.value=l.message,l}finally{r.value=!1}}}function $(l=1){a.value.currentPage=l,E()}return H([F,b],async()=>{await T(),S()},{immediate:!0}),W(()=>{e.autoLoad&&E()}),K(S),{table:t,pagination:o,pagin:a,isFlexible:f,paginHeight:i,tableHeight:m(()=>{if(f.value)return"100%";const{height:l}=e,c=i.value;return typeof l=="number"?l-c:l&&/^(\d+)px$/g.test(l)?+l.replace("px","")-c:""}),cols:F,tableData:b,selection:x,loading:r,errorMessage:h,adjust:S,load:E,jumpPage:$,changeSize(l){Object.assign(a.value,{pageSize:l,currentPage:1}),E()},sortChange(l){n("sort-change",l),!g.value&&(p.value=l,$())},filterChange(l){n("filter-change",l),!g.value&&$()},async updatePaginHeight(){var c;await T();const l=(c=o.value)==null?void 0:c.$el;i.value=(l==null?void 0:l.clientHeight)||0},bindScope({row:l,column:c,$index:_}){if(l){const y=l[c.property];return{row:l,column:c,value:y,index:_}}return{column:c,index:_}}}}}),re=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"el-table-ext",class:{"is-flexible":e.isFlexible},style:{height:typeof e.height=="number"?e.height+"px":e.height}},[t("ElTable",e._g(e._b({ref:"table",attrs:{data:e.tableData,height:e.tableHeight,"default-sort":e.defaultSort},on:{"sort-change":e.sortChange,"filter-change":e.filterChange},scopedSlots:e._u([{key:"empty",fn:function(){return[e._t("empty",function(){return[t("ElEmpty",{attrs:{description:e.errorMessage||e.emptyText||e.options.emptyText,image:e.emptyImage,"image-size":e.emptyImageSize}})]})]},proxy:!0},{key:"append",fn:function(){return[e._t("append")]},proxy:!0}],null,!0)},"ElTable",e.options,!1),e.$listeners),[e._l(e.cols,function(o){return t("ElTableColumn",e._b({key:o.prop,attrs:{"column-key":o.prop},scopedSlots:e._u([e.$scopedSlots[o.prop]?{key:"default",fn:function(r){return[e._t(o.prop,function(){return[e._v(" "+e._s(r.row[o.prop])+" ")]},null,e.bindScope(r))]}}:o.render?{key:"default",fn:function(r){return[t("ColumnRender",e._b({attrs:{render:o.render}},"ColumnRender",e.bindScope(r),!1))]}}:null,e.$scopedSlots["header:"+o.prop]?{key:"header",fn:function(r){return[e._t("header:"+o.prop,function(){return[e._v(" "+e._s(r.column.label)+" ")]},null,e.bindScope(r))]}}:null],null,!0)},"ElTableColumn",o,!1))}),e._t("default")],2),e.pager?t("ElPagination",e._g(e._b({ref:"pagination",on:{"size-change":e.changeSize,"current-change":e.jumpPage,"hook:mounted":e.updatePaginHeight,"hook:destroyed":function(o){e.paginHeight=0}}},"ElPagination",e.pagin,!1),e.$listeners)):e._e()],1)},ne=[];function R(e,n,t,o,r,a,i,p){var u=typeof e=="function"?e.options:e;n&&(u.render=n,u.staticRenderFns=t,u._compiled=!0),o&&(u.functional=!0),a&&(u._scopeId="data-v-"+a);var s;if(i?(s=function(f){f=f||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!f&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(f=__VUE_SSR_CONTEXT__),r&&r.call(this,f),f&&f._registeredComponents&&f._registeredComponents.add(i)},u._ssrRegister=s):r&&(s=p?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(u.functional){u._injectStyles=s;var h=u.render;u.render=function(b,x){return s.call(x),h(b,x)}}else{var g=u.beforeCreate;u.beforeCreate=g?[].concat(g,s):[s]}return{exports:e,options:u}}const P={};var ae=R(te,re,ne,!1,oe,null,null,null);function oe(e){for(let n in P)this[n]=P[n]}var D=function(){return ae.exports}(),le={install(e){e.component(D.name,D)}};async function ue(e,n=0){return new Promise((t,o)=>{setTimeout(async()=>{try{const r=await e();t(r)}catch(r){o(r)}},n)})}function L(e){return ue(e,Math.random()*1e3)}function ie(){const e=new Date,n=Array.from(new Array(Math.floor(Math.random()*1e3)),(t,o)=>se(o,new Date(e.getTime()-Math.random()*2*365*24*60*60*1e3)));return n.sort((t,o)=>o.index-t.index),n}function se(e,n=new Date){return{index:e,id:e+1+"",name:`\u7528\u6237${e+1}`,phone:"1"+Array.from(new Array(10),()=>Math.floor(Math.random()*10)).join(""),sex:Math.floor(Math.random()*2),remark:Array.from(new Array(Math.floor(Math.random()*10)),()=>"\u8FD9\u662F\u5F88\u957F\u7684\u4E00\u6BB5\u6587\u672C").join(","),type:Math.floor(Math.random()*3),status:Math.floor(Math.random()*2),createTime:n}}const w=ie();function ce({keyword:e,pagin:n,sorts:t,filters:o}){return L(()=>{let r=[...w];t.prop&&r.sort(t.order==="ascending"?(i,p)=>{const u=i[t.prop],s=p[t.prop];return u.localeCompare?u.localeCompare(s,"zh-CN"):u-s}:(i,p)=>{const u=i[t.prop],s=p[t.prop];return s.localeCompare?s.localeCompare(u,"zh-CN"):s-u}),(e||Object.keys(o).length)&&(r=r.filter(i=>e&&!i.name.includes(e)&&!i.phone.includes(e)?!1:!Object.entries(o).some(([p,u])=>!u.includes(i[p]))));const a=(n.currentPage-1)*n.pageSize;return{data:r.slice(a,a+n.pageSize),total:r.length}})}function pe(e){return L(()=>{const n=w.find(t=>t.id===e);!n||w.splice(w.indexOf(n),1)})}v.filter("datetime",e=>new Date(e).toLocaleString());const z=[{text:"\u5728\u7EBF",value:1,class:"text-green"},{text:"\u79BB\u7EBF",value:0,class:"text-gray"}],j=[{text:"\u666E\u901A\u7528\u6237",value:0},{text:"\u7BA1\u7406\u5458",value:1,class:"text-blue"},{text:"VIP",value:2,class:"text-orange"}];var fe=B({name:"App",setup(){const e=d(null),n=d([{prop:"selection",type:"selection",fixed:!0},{prop:"id",label:"ID",width:80,fixed:!0},{prop:"name",label:"\u59D3\u540D",minWidth:80,fixed:!0,sortable:"custom"},{prop:"phone",label:"\u624B\u673A\u53F7",minWidth:120},{prop:"sex",label:"\u6027\u522B",filterMultiple:!1,filters:[{text:"\u7537",value:1},{text:"\u5973",value:0}]},{prop:"type",label:"\u8EAB\u4EFD",filters:j,renderOption:j},{prop:"remark",label:"\u5907\u6CE8",minWidth:140,showOverflowTooltip:!0},{prop:"status",label:"\u72B6\u6001",filters:z,filterMultiple:!1,renderOption:z},{prop:"createTime",label:"\u6CE8\u518C\u65F6\u95F4",width:180,formatter:"datetime",sortable:"custom"},{prop:"operate",label:"\u64CD\u4F5C",fixed:"right",width:150}].map(a=>(a.visible=!0,a))),t=m(()=>{var a;return((a=e.value)==null?void 0:a.selection)||[]}),o=d("");function r(){var a;(a=e.value)==null||a.load()}return{table:e,columns:n,selection:t,keyword:o,query:async({pagin:a,filters:i,sorts:p})=>{const{data:u,total:s}=await ce({keyword:o.value,pagin:a,filters:i,sorts:p});return{data:u,total:s}},reload:r,search(){var a;(a=e.value)==null||a.jumpPage()},showDetail(a){k.exports.MessageBox.alert(JSON.stringify(a),"\u8BE6\u60C5\u6570\u636E")},async remove(a){await k.exports.MessageBox.confirm(`\u662F\u5426\u786E\u8BA4\u8981\u5220\u9664\u201C${a.name}\u201D\uFF1F`,"\u64CD\u7EB5\u786E\u8BA4",{type:"error"}),await pe(a.id),k.exports.Message.success(`\u201C${a.name}\u201D\u5220\u9664\u6210\u529F`),r()},addCol(){const a=n.value,{length:i}=a;a.push({prop:`Col${i}`,label:`\u65B0\u589E\u5B57\u6BB5[${i}]`,visible:!0,formatter(p,u,s,h){return u.label+","+h}})},modifyCol(){const a=n.value;X(a,a.length-1,{label:"\u6700\u540E\u4E00\u4E2A",visible:!0,formatter(i,p,u,s){return p.label+","+s}})}}}}),de=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"demo-page"},[t("header",{staticClass:"demo-header"},[t("div",{staticClass:"demo-header__text"},[e._v("\u5DF2\u9009\u4E2D "+e._s(e.selection.length)+" \u9879")]),t("div",{staticClass:"demo-header__actions"},[t("ElButton",{attrs:{type:"primary"},on:{click:e.addCol}},[e._v("\u65B0\u589E\u5217")]),t("ElButton",{on:{click:e.modifyCol}},[e._v("\u4FEE\u6539\u672B\u5217")]),t("ElPopover",{staticClass:"actions-popover-wrapper",attrs:{placement:"top-start",width:"200",trigger:"hover","popper-class":"actions-popover"}},[t("ElButton",{attrs:{slot:"reference"},slot:"reference"},[e._v("\u663E\u793A/\u9690\u85CF\u5217")]),t("ElForm",{attrs:{"label-width":"100px"}},e._l(e.columns,function(o,r){return t("ElFormItem",{directives:[{name:"show",rawName:"v-show",value:!!o.label,expression:"!!item.label"}],key:(o.prop||"")+r,attrs:{label:o.label}},[t("ElSwitch",{model:{value:o.visible,callback:function(a){e.$set(o,"visible",a)},expression:"item.visible"}})],1)}),1)],1)],1),t("div",{staticClass:"demo-header__search"},[t("ElInput",{attrs:{placeholder:"\u8BF7\u641C\u7D22\u59D3\u540D\u6216\u624B\u673A\u53F7",clearable:""},on:{change:e.search},model:{value:e.keyword,callback:function(o){e.keyword=o},expression:"keyword"}},[t("a",{staticClass:"demo-header__search-btn el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.search},slot:"suffix"})])],1)]),t("ElTableExt",{ref:"table",attrs:{columns:e.columns,query:e.query,pager:{pageSize:100},"empty-text":"\u672A\u67E5\u8BE2\u5230\u8BB0\u5F55",options:{stripe:!0,border:!0,rowKey:"id",highlightCurrentRow:!0}},scopedSlots:e._u([{key:"sex",fn:function(o){var r=o.value;return[e._v(" "+e._s(["\u5973","\u7537"][r])+" ")]}},{key:"operate",fn:function(o){var r=o.row;return[t("ElButton",{attrs:{type:"primary"},on:{click:function(a){return e.showDetail(r)}}},[e._v("\u8BE6\u60C5")]),t("ElButton",{attrs:{type:"danger"},on:{click:function(a){return e.remove(r)}}},[e._v("\u5220\u9664")])]}}])},[t("div",{style:{textAlign:"center",padding:"15px 0"},attrs:{slot:"append"},slot:"append"},[e._v(" \u63D2\u5165\u81F3\u8868\u683C\u6700\u540E\u4E00\u884C\u4E4B\u540E\u7684\u5185\u5BB9\uFF0C\u5982\u679C\u9700\u8981\u5BF9\u8868\u683C\u7684\u5185\u5BB9\u8FDB\u884C\u65E0\u9650\u6EDA\u52A8\u64CD\u4F5C\uFF0C\u53EF\u80FD\u9700\u8981\u7528\u5230\u8FD9\u4E2A slot\u3002\u82E5\u8868\u683C\u6709\u5408\u8BA1\u884C\uFF0C\u8BE5 slot \u4F1A\u4F4D\u4E8E\u5408\u8BA1\u884C\u4E4B\u4E0A\u3002 ")])])],1)},me=[];const N={};var ve=R(fe,de,me,!1,he,"9c31401c",null,null);function he(e){for(let n in N)this[n]=N[n]}var ge=function(){return ve.exports}();v.config.productionTip=!1;v.config.devtools=!0;v.use(J);v.use(G,{size:"mini"});v.use(le);new v({render:e=>e(ge)}).$mount("#app");export{ye as __vite_legacy_guard};
